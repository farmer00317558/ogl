# Specification: OpenGen Link Protocol (OGL)

**Full Name**: Open Generative Deep-Link Protocol
**Abbreviation**: OGL
**Version**: v1.0.0
**Type**: URL Query Parameter Standard / URI Scheme

## 1. Abstract

The **OpenGen Link (OGL)** is an open standard based on HTTP/HTTPS URL parameters, designed to resolve interoperability issues between Generative AI Content Communities (Source/Prompt Libraries) and Generation Tools (Target/Inference Platforms).

This protocol defines a standardized set of parameter naming conventions. It allows a Source website to construct a standardized URL that seamlessly passes prompts, model configurations, and generation parameters to a Target website, enabling a "One-Click Jump & Fill" workflow.

## 2. Design Principles

1.  **Platform Agnostic**: The protocol is not bound to any specific vendor (e.g., Midjourney or Stable Diffusion) but defines universal generative primitives.
2.  **Extensible**: While primarily designing for Text-to-Image (T2I), it reserves interfaces for Text-to-Video (T2V), Text-to-Audio (T2A), and 3D models.
3.  **Graceful Degradation**: If the Target website does not support specific advanced parameters, it must ignore them while ensuring the core Prompt is preserved and populated.
4.  **Human Readable**: Semantic Key-Value pairs are prioritized over encrypted strings for ease of debugging and manual construction.

## 3. URL Construction

An OGL-compliant link consists of a **Base URL** and **Query Parameters**.

### Format

```text
https://{target-site.com}/create?ogl_ver=1.0&prompt={encoded_string}&{optional_params}
```

- **Namespace**: To avoid conflicts with existing parameters on the Target website, it is recommended (though not mandatory) for Targets to support the `ogl_` prefix or map the standard keys defined here to their internal state.
- **Encoding**: All values **MUST** be URL Encoded.

## 4. Parameter Dictionary

### 4.1. Core Metadata

| Key          | Type   | Description                                                      | Example              |
| :----------- | :----- | :--------------------------------------------------------------- | :------------------- |
| `ogl_ver`    | String | Protocol version number.                                         | `1.0`                |
| `ogl_source` | String | Name of the source website (for attribution).                    | `civitai`, `flowgpt` |
| `action`     | String | Expected behavior: `fill` (populate only), `run` (auto-execute). | `fill`               |

### 4.2. General Generation Parameters

Applicable to most modalities (Image, Video, 3D).

| Key               | Type   | Required | Description                                                     |
| :---------------- | :----- | :------- | :-------------------------------------------------------------- |
| `prompt`          | String | **Yes**  | Positive prompt/text input.                                     |
| `negative_prompt` | String | No       | Negative prompt.                                                |
| `model`           | String | No       | Model identifier, must use standard identifiers from section 4.2.1 |
| `model_hash`      | String | No       | Model hash for precise matching.                                |
| `seed`            | Int    | No       | Random seed (-1 for random).                                    |

#### 4.2.1. Standard Model List

To ensure cross-platform interoperability, the `model` parameter must use the following standardized model identifiers. Platforms should map these identifiers to their internal model implementations.

| Model Name          | Model Identifier               | Type  | Description              |
| :------------------ | :----------------------------- | :---- | :----------------------- |
| Nano Banana Pro     | `gemini-3-pro-image-preview`   | Image | High-performance image generation |

**Usage Guidelines**:
- The `model` parameter value must strictly use the values from the "Model Identifier" column
- When a platform receives an unrecognized model identifier, it should fall back to a default model or prompt the user
- Custom model paths or non-standard naming are not supported

### 4.3. Image Extension

| Key            | Type   | Description                                                    |
| :------------- | :----- | :------------------------------------------------------------- |
| `width`        | Int    | Image width (px).                                              |
| `height`       | Int    | Image height (px).                                             |
| `aspect_ratio` | String | Aspect ratio (e.g., `16:9`, `1:1`). Takes precedence over w/h. |

### 4.4. Video Extension

| Key             | Type   | Description                                     |
| :-------------- | :----- | :---------------------------------------------- |
| `duration`      | Float  | Video duration (seconds).                       |
| `fps`           | Int    | Frames per second.                              |
| `camera_motion` | String | Camera movement description (e.g., `pan_left`). |

## 5. Interaction Flow Example

### Scenario: A user finds an image on PromptHub and wants to generate it on MyGenSite.

1.  **User** clicks the "Run on MyGenSite" button on PromptHub.
2.  **PromptHub** constructs the link:
    ```
    https://mygensite.com/workspace?ogl_ver=1.0&action=fill&prompt=cat%20in%20space&model=sdxl_1.0&aspect_ratio=16:9
    ```
3.  **MyGenSite** receives the request and parses the URL parameters.
4.  **MyGenSite** populates the input field with `cat in space`, selects the `SDXL 1.0` model, and sets the canvas to `16:9`.
5.  **User** clicks "Generate".

## 6. Implementation Guide

### For Source (Prompt Libraries)

- **Configuration**: Provide a settings page allowing users to input the Base URL of their preferred generation tool (e.g., `http://127.0.0.1:7860` for local SD WebUI or `https://midjourney.com`).
- **Encoding**: Ensure `encodeURIComponent` is applied to all parameter values.

### For Target (Generation Tools)

- **Parsing Logic**: Check `location.search` during the page load event (`window.onload` or framework equivalent).
- **Parameter Mapping**: Establish a mapping table to translate OGL standard parameters into the application's internal UI state.
- **Security**: If `action=run` is present, it is **RECOMMENDED** to display a confirmation dialog before execution to prevent malicious consumption of user credits.

## 7. Ecosystem & Expansion

To professionalize this standard, the following resources are suggested:

1.  **GitHub Repository**: e.g., `opengen-link-spec`.
2.  **Badge**: An "OGL Compatible" badge for websites to display in their footer.
